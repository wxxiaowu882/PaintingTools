# 绘画工作台需求文档（简洁版）

## 项目概述
- **应用名称**：我爱你们 - 绘画辅助（童画师吴晓的绘画工作台）
- **核心定位**：为绘画学习者提供的在线辅助工具，专注于构图比例分析和色彩简化
- **目标用户**：童画师吴晓的学员、粉丝及绘画爱好者
- **技术特点**：原生HTML5/CSS3/JavaScript，无框架依赖，移动端优先的响应式设计

## 核心功能模块

### 1. 网格起型工具
**用途**：帮助绘画者通过网格参考线进行精准构图

**主要功能**：
- 📂 从相册上传图片（支持常见图像格式）
- 🎨 可调节网格参数：
  - 网格密度：2-15格可调（默认3格）
  - 网格颜色：自定义颜色选择器
  - 方格模式：切换长方形/正方形网格
- ✋ 双指交互模式：
  - 移动视图模式：双指缩放/拖拽图片
  - 移动网格模式：双指拖拽调整网格对齐位置
- ⬇️ 保存结果：预览并保存网格叠加图（JPG格式）

### 2. 色阶概括工具
**用途**：将图片色彩简化为有限色阶，帮助分析色彩构成

**主要功能**：
- 📂 从相册上传图片
- 🎨 色阶参数调节：
  - 色阶数量：2-20级可调（默认12级）
  - 黑白模式：一键切换为灰度处理
- 🔄 实时处理：调整参数后立即更新显示
- 📊 4联对比图：生成田字形布局的四种色阶值对比（0/12/9/15级）
- ⬇️ 保存结果：预览并保存色阶处理图（JPG格式）

## 用户体验特性

### 界面设计
- 📱 响应式布局：移动端优先，PC端自动适配
- 🏷️ 标签页导航：网格工具（蓝色主题）与色阶工具（橙色主题）快速切换
- 🎯 视觉反馈：滑块动态填充、按钮状态变化、激活指示器
- 🎨 品牌元素：左对齐品牌名片，点击显示关于信息

### 交互设计
- 👆 触摸优化：专门为移动设备设计的手势交互
- ✌️ 双指操作：缩放、拖拽的精准控制
- 🔄 实时预览：所有参数调整立即反映在画布上
- ⚡ 快速操作：一键适应视图、重置网格、百分比缩放

### 辅助功能
- ℹ️ 占位提示：未上传图片时的操作引导（点击"+"图标）
- 📋 数值显示：当前参数的实时反馈
- ⏳ 加载提示：处理大图片时的等待动画
- 🌍 微信引导：检测微信浏览器，提示在浏览器中打开以获得最佳体验

## 技术实现要点

### 图像处理
- **Canvas核心**：所有图像处理基于HTML5 Canvas API
- **网格绘制**：动态计算线条位置，支持偏移和正方形模式
- **色阶量化**：RGB通道独立处理，支持灰度转换
- **尺寸限制**：自动限制Canvas最大尺寸（2560×2560）确保iPad兼容性

### 手势系统
- **多点触摸检测**：识别双指操作，区分不同模式
- **事件处理**：统一处理触摸/鼠标事件，支持桌面操作
- **模式切换**：根据当前状态决定手势行为（移动视图 vs 移动网格）

### 导出系统
- **预览优先**：先预览结果，再长按保存
- **智能截取**：根据图片覆盖范围选择保存策略
  - 完全覆盖 → 保存当前视窗内容（所见即所得）
  - 未完全覆盖 → 保存完整图片
- **时间戳命名**：自动生成带时间戳的文件名（月日_时_分_秒）

### 状态管理
- **集中式状态**：统一管理缩放、平移、模式等参数
- **独立状态对象**：网格工具和色阶工具状态互不干扰
- **视图保持**：操作过程中保持视图状态

## 兼容性说明
- ✅ 现代浏览器：Chrome、Safari、Firefox、Edge
- ✅ 移动设备：iOS Safari、Android Chrome（触摸优化）
- ✅ 桌面设备：完整鼠标操作支持
- ⚠️ 微信浏览器：功能受限，引导用户在外置浏览器中打开

## 文件结构
- `Index_temp_ui_phase1.html`：主应用文件（包含所有HTML/CSS/JavaScript）
- 无外部依赖，单文件部署即可运行

---

*文档基于当前代码分析生成（2026-01-23）*
*核心功能已从旧版v2.32完整移植至新版UI设计*